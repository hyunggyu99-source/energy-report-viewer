# 에너지해석모델 보고서 활용 — 중간보고

> **작성일**: 2025.02.12  
> **작성자**: 지형규  
> **현재 상태**: 프로토타입 완성 / 피드백 대기

---

## 1. 보고서 비교 대시보드

### 배경

에너지해석 보고서를 추출 후, PDF는 활용이 쉽지 않을 것 같아 다른 형식을 확인했습니다.  
**HTML 형식(eplustbl.htm)** 으로 추출된다는 사실을 확인한 후,  
각 보고서의 값을 HTML 파일을 해석하고 비교하는 웹 페이지를 만들어  
**직관적으로 어떤 변화값이 있는지 확인**할 수 있게 만들어 봤습니다.

### 사용 방법

```
파일:   index.html (브라우저에서 더블클릭)
입력:   eplustbl.htm 파일 1~2개를 드래그 앤 드롭
```

### 주요 기능

| 탭 | 기능 |
|----|------|
| **Overview** | End-Use 에너지 비율 (파이차트), 연료별 에너지 (막대), KPI 요약카드 |
| **Monthly Analysis** | 월별 에너지 소비 추이 — 적층 막대차트, 라인 차트, 데이터 테이블 |
| **Comparison** | 보고서 2개 비교 — 항목별 증감률 자동 계산, 비교 차트 |
| **Building Details** | 건물 정보, End Use 상세, Zone 요약, 쾌적 현황 |
| **Zone Explorer** | Zone별 면적/체적/부하 상세 조회 + Zone 간 비교 |
| **Insights** | 자동 분석 — 에너지 사용 패턴, 문제점 자동 도출 |
| **Developer API** | JSON/CSV 내보내기 (다른 도구 연동 가능) |

- SI/IP 단위 실시간 전환
- 한국어/영어 UI 전환
- HTM 파일 2개를 드롭하면 자동으로 비교 분석

### 활용 시나리오

```
예시: 외벽 단열재 변경 전후 비교
1. 기존 설계안 eplustbl.htm 드롭
2. 변경안 eplustbl.htm 추가 드롭
3. Comparison 탭 → 냉난방 에너지 변화량 즉시 확인
4. Zone Explorer → 어떤 공간에서 차이가 큰지 확인
```

### 데모 영상

📎 **`화면 녹화 중 2026-02-12 163909.mp4`**  
> HTM 보고서 드롭 → 차트/테이블 자동 생성, 탭별 기능 확인

---

## 2. 3D 에너지 뷰어 (Space × Zone 매칭)

### 배경

예나님이 만드신 3D 뷰를 기준으로 웹으로 추출이 된다면,  
**에너지 해석 모델로도 추출이 가능하겠다**고 생각하게 되었습니다.

이후로 확인한 내용:

1. **Space 기준으로 에너지해석 모델이 생성**된다는 것을 확인
2. 에너지해석 보고서에도 **Space(Zone) 기준으로 상세 데이터가 나뉜다**는 것을 확인
3. **Space 이름을 기준으로** 에너지해석모델(3D)과 에너지해석보고서의 상세값을 **매칭**

이를 바탕으로 기존 보고서 활용 웹(1번)의 기능을 기반으로,  
**보고서 2개를 넣어 어떤 변화가 있는지 공간별로 확인**이 가능하게 만들어 봤습니다.

### 사용 방법

```
파일:   energy-3d-viewer.html (브라우저에서 더블클릭)
입력:   ① model.glb (Revit 3D 모델)
        ② energy-spaces.json (Space 데이터)
        ③ eplustbl.htm (에너지 보고서, 1~2개)
```

### 주요 기능

| 기능 | 설명 |
|------|------|
| **3D 모델 렌더링** | Revit에서 내보낸 GLB 모델을 웹에서 회전/줌/클릭 |
| **Space 3D 박스** | 각 공간(Space)을 3D 박스로 시각화 |
| **해석 표면 표시** | Analytical Surface (벽/바닥/지붕/창) 경계면 표시 |
| **Zone 자동 매칭** | Space 이름 ↔ HTM Zone 이름을 4단계 전략으로 자동 매칭 |
| **히트맵 색상** | 면적/체적/조명밀도/총부하/냉방/난방 기준으로 색상 시각화 |
| **속성 패널** | 선택한 공간의 치수, 에너지, 부하 등 상세 속성 표시 |
| **보고서 2개 비교** | HTM 2개 로드 → 공간별 변화량(증감률) 비교 |
| **에너지 분석 요약** | 개요 / 에너지 사용 / 월별 / 비교 탭 |

### Zone 매칭 방식

```
Space 이름과 HTM Zone 이름을 자동으로 매칭합니다:

1단계: 이름 정확히 일치
2단계: 이름에서 뒤쪽 번호 제거 후 매칭
3단계: 층(Level) + Space Type 키워드로 HVAC Zone 매칭
4단계: 체적(Volume) 유사도 15% 이내로 매칭
```

### 데모 파일

```
📎 0212_DEMO_Energy3DViewer.html
```

- **더블클릭만 하면 바로 실행**됩니다 (파일 업로드 불필요)
- 3층 오피스 빌딩 (13개 Space) + 에너지 데이터가 내장되어 있습니다
- 3D 뷰, Space 선택, 에너지 분석 요약, SI/IP 전환 등 주요 기능을 바로 확인할 수 있습니다

### 데모 영상

📎 **영상 1** — `화면 녹화 중 2026-02-12 144627.mp4`  
> 3D 뷰 기본 조작(회전/줌) + 색상 기준 변경 시연  
> 냉방부하, 층(Level), 면적 등 기준에 따라 Space 색상이 히트맵으로 변하는 모습

📎 **영상 2** — `화면 녹화 중 2026-02-12 144415.mp4`  
> 각 Space 클릭 시 에너지해석 보고서의 상세값이 해당 Space에 맞게 표시되는 모습  
> Zone 면적, 체적, 조명밀도, 설비밀도, 냉난방 설계부하 등

---

## 첨부 파일 목록

| # | 파일명 | 설명 |
|---|--------|------|
| 1 | `index.html` | 1번 도구 — 보고서 비교 대시보드 (HTM 파일 필요) |
| 2 | `0212_DEMO_Energy3DViewer.html` | 2번 도구 — 3D 에너지 뷰어 데모 (바로 실행 가능) |
| 3 | `화면 녹화 중 2026-02-12 163909.mp4` | 1번 영상 — 보고서 드롭 → 차트/테이블 자동 생성 |
| 4 | `화면 녹화 중 2026-02-12 144627.mp4` | 2번 영상 — 3D 뷰 조작 + 색상 기준 변경 (히트맵) |
| 5 | `화면 녹화 중 2026-02-12 144415.mp4` | 2번 영상 — Space 클릭 → 에너지 보고서 상세값 매칭 |
| 6 | 이 문서 (`.md`) | 중간보고서 |

> 모든 HTML 파일은 **브라우저에서 더블클릭**으로 바로 열리며,  
> 별도 설치(서버, npm, Python 등)가 필요 없습니다.

---

## 기술 스택

| 기술 | 용도 |
|------|------|
| HTML / CSS / JavaScript | 프론트엔드 전체 (단일 HTML 파일) |
| Three.js | 3D 렌더링 (WebGL) |
| Chart.js | 차트 (파이, 막대, 라인) |

---

## 향후 계획

- [ ] 실제 프로젝트 데이터로 테스트 및 매칭 정확도 개선
- [ ] 보고서 비교 시 주요 변화 항목 하이라이트
- [ ] 에너지 절감률 자동 계산 기능
- [ ] 여러 설계안 동시 비교 (현재 최대 2개 → 확장 검토)
